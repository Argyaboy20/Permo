"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5550],{5550:(z,P,p)=>{p.r(P),p.d(P,{GantipasswordPageModule:()=>R});var m=p(177),i=p(4341),g=p(4742),h=p(5260),f=p(467),_=p(1626),n=p(4438),O=p(3656);function M(s,a){1&s&&(n.j41(0,"ion-note",12),n.EFF(1," Password lama harus diisi "),n.k0s())}function x(s,a){1&s&&(n.j41(0,"ion-note",12),n.EFF(1," Password minimal 6 karakter "),n.k0s())}function b(s,a){1&s&&(n.j41(0,"ion-note",12),n.EFF(1," Password baru harus diisi "),n.k0s())}function v(s,a){1&s&&(n.j41(0,"div",15)(1,"ion-note",12),n.EFF(2,"\u2717 Password minimal 6 karakter"),n.k0s()())}function G(s,a){1&s&&(n.j41(0,"div",15)(1,"ion-note",12),n.EFF(2,"\u2717 Password harus mengandung minimal satu huruf kapital"),n.k0s()())}function k(s,a){1&s&&(n.j41(0,"div",15)(1,"ion-note",12),n.EFF(2,"\u2717 Password harus mengandung minimal satu huruf kecil"),n.k0s()())}function F(s,a){1&s&&(n.j41(0,"div",15)(1,"ion-note",12),n.EFF(2,"\u2717 Password harus mengandung minimal satu angka"),n.k0s()())}function y(s,a){1&s&&(n.j41(0,"div",15)(1,"ion-note",12),n.EFF(2,"\u2717 Password harus mengandung minimal satu karakter spesial (@$!%*?&)"),n.k0s()())}function E(s,a){if(1&s&&(n.j41(0,"div",13),n.DNE(1,v,3,0,"div",14)(2,G,3,0,"div",14)(3,k,3,0,"div",14)(4,F,3,0,"div",14)(5,y,3,0,"div",14),n.k0s()),2&s){const d=n.XpG();n.R7$(),n.Y8G("ngIf",d.passwordErrors.length),n.R7$(),n.Y8G("ngIf",d.passwordErrors.uppercase),n.R7$(),n.Y8G("ngIf",d.passwordErrors.lowercase),n.R7$(),n.Y8G("ngIf",d.passwordErrors.number),n.R7$(),n.Y8G("ngIf",d.passwordErrors.special)}}const $=[{path:"",component:(()=>{var s;class a{constructor(t,o,e,r,l,c){this.http=t,this.alertController=o,this.router=e,this.formBuilder=r,this.platform=l,this.location=c,this.showOldPassword=!1,this.showNewPassword=!1,this.isLoading=!1,this.passwordErrors={uppercase:!1,lowercase:!1,number:!1,special:!1,length:!1};const w=sessionStorage.getItem("currentUser");w?this.userData=JSON.parse(w):this.router.navigate(["/tabs/tab1"],{replaceUrl:!0}),(this.platform.is("desktop")||this.platform.is("mobileweb"))&&window.addEventListener("beforeunload",C=>{localStorage.setItem("lastRoute","/gantipassword")})}ngOnInit(){this.initForm(),this.maintainRoute()}ionViewWillEnter(){this.location.replaceState("/gantipassword"),this.backButtonSubscription=this.platform.backButton.subscribeWithPriority(10,()=>{this.router.navigate(["/tabs/tab2"])})}ionViewWillLeave(){this.backButtonSubscription&&this.backButtonSubscription.unsubscribe()}maintainRoute(){const t=localStorage.getItem("lastRoute");"/gantipassword"===t&&this.location.replaceState("/gantipassword"),(this.platform.is("desktop")||this.platform.is("mobileweb"))&&window.addEventListener("load",()=>{"/gantipassword"===t&&this.location.replaceState("/gantipassword")})}initForm(){this.passwordForm=this.formBuilder.group({oldPassword:["",[i.k0.required,i.k0.minLength(6)]],newPassword:["",[i.k0.required,this.passwordValidator()]]})}passwordValidator(){return t=>{const o=t.value;if(!o)return null;const e={};return o.length<6&&(e.length=!0),/[A-Z]/.test(o)||(e.uppercase=!0),/[a-z]/.test(o)||(e.lowercase=!0),/[0-9]/.test(o)||(e.number=!0),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>/?]/.test(o)||(e.special=!0),this.updatePasswordErrors(e),0===Object.keys(e).length?null:e}}updatePasswordErrors(t){this.passwordErrors=t?{uppercase:t.uppercase||!1,lowercase:t.lowercase||!1,number:t.number||!1,special:t.special||!1,length:t.length||!1}:{uppercase:!1,lowercase:!1,number:!1,special:!1,length:!1}}onPasswordChange(t){const e=this.passwordForm.get("newPassword");e&&e.updateValueAndValidity()}toggleOldPasswordVisibility(){this.showOldPassword=!this.showOldPassword}toggleNewPasswordVisibility(){this.showNewPassword=!this.showNewPassword}oldPasswordSameAsNew(){var t,o;const e=null===(t=this.passwordForm.get("oldPassword"))||void 0===t?void 0:t.value,r=null===(o=this.passwordForm.get("newPassword"))||void 0===o?void 0:o.value;return e&&r&&e===r}changePassword(){var t=this;return(0,f.A)(function*(){var o,e;if(t.isLoading||!t.passwordForm.valid)return;const r=null===(o=t.passwordForm.get("oldPassword"))||void 0===o?void 0:o.value,l=null===(e=t.passwordForm.get("newPassword"))||void 0===e?void 0:e.value;if(!r||!l)return void(yield t.showAlert("Peringatan","Mohon isi semua data"));if(r===l)return void(yield t.showAlert("Peringatan","Password baru harus berbeda dengan password lama"));if(!t.userData||!t.userData.id)return yield t.showAlert("Error","Data pengguna tidak ditemukan"),void t.router.navigate(["/tabs/tab1"],{replaceUrl:!0});t.isLoading=!0;const c={aksi:"change_password",old_password:r,new_password:l,user_id:t.userData.id},w=(new _.Lr).set("Content-Type","application/json");try{const u=yield t.http.post("http://127.0.0.1/api/action.php",c,{headers:w}).toPromise();u&&u.success?(u.user&&sessionStorage.setItem("currentUser",JSON.stringify(u.user)),yield t.showAlert("Sukses","Password berhasil diubah"),t.passwordForm.reset(),t.router.navigate(["/tabs/tab2"])):yield t.showAlert("Peringatan",(null==u?void 0:u.message)||"Gagal mengubah password")}catch(u){console.error("Error:",u),yield t.showAlert("Error","Terjadi kesalahan sistem")}finally{t.isLoading=!1}})()}showAlert(t,o){var e=this;return(0,f.A)(function*(){yield(yield e.alertController.create({header:t,message:o,buttons:["OK"]})).present()})()}}return(s=a).\u0275fac=function(t){return new(t||s)(n.rXU(_.Qq),n.rXU(g.hG),n.rXU(h.Ix),n.rXU(i.ok),n.rXU(O.OD),n.rXU(m.aZ))},s.\u0275cmp=n.VBU({type:s,selectors:[["app-gantipassword"]],decls:27,vars:11,consts:[[1,"container"],[1,"header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["position","floating"],["formControlName","oldPassword","required","","minlength","6",3,"type"],["slot","end",1,"password-toggle",3,"click","name"],["color","danger",4,"ngIf"],["formControlName","newPassword","required","","minlength","6",3,"ionChange","type"],["class","password-requirements-list",4,"ngIf"],[1,"button-container"],["type","submit","expand","block",1,"btn",3,"disabled"],["color","danger"],[1,"password-requirements-list"],["class","requirement-item",4,"ngIf"],[1,"requirement-item"]],template:function(t,o){if(1&t&&(n.j41(0,"ion-content")(1,"div",0)(2,"div",1)(3,"h1"),n.EFF(4,"GANTI PASSWORD"),n.k0s(),n.j41(5,"p"),n.EFF(6,"Harap ingat perubahan password Anda"),n.k0s()(),n.j41(7,"form",2),n.bIt("ngSubmit",function(){return o.changePassword()}),n.j41(8,"div",3)(9,"ion-item")(10,"ion-label",4),n.EFF(11,"Password Lama"),n.k0s(),n.nrm(12,"ion-input",5),n.j41(13,"ion-icon",6),n.bIt("click",function(){return o.toggleOldPasswordVisibility()}),n.k0s()(),n.DNE(14,M,2,0,"ion-note",7)(15,x,2,0,"ion-note",7),n.k0s(),n.j41(16,"div",3)(17,"ion-item")(18,"ion-label",4),n.EFF(19,"Password Baru"),n.k0s(),n.j41(20,"ion-input",8),n.bIt("ionChange",function(r){return o.onPasswordChange(r)}),n.k0s(),n.j41(21,"ion-icon",6),n.bIt("click",function(){return o.toggleNewPasswordVisibility()}),n.k0s()(),n.DNE(22,b,2,0,"ion-note",7)(23,E,6,5,"div",9),n.k0s(),n.j41(24,"div",10)(25,"ion-button",11),n.EFF(26),n.k0s()()()()()),2&t){let e,r,l,c;n.R7$(7),n.Y8G("formGroup",o.passwordForm),n.R7$(5),n.Y8G("type",o.showOldPassword?"text":"password"),n.R7$(),n.Y8G("name",o.showOldPassword?"eye-off":"eye"),n.R7$(),n.Y8G("ngIf",(null==(e=o.passwordForm.get("oldPassword"))?null:e.touched)&&(null==(e=o.passwordForm.get("oldPassword"))||null==e.errors?null:e.errors.required)),n.R7$(),n.Y8G("ngIf",(null==(r=o.passwordForm.get("oldPassword"))?null:r.touched)&&(null==(r=o.passwordForm.get("oldPassword"))||null==r.errors?null:r.errors.minlength)),n.R7$(5),n.Y8G("type",o.showNewPassword?"text":"password"),n.R7$(),n.Y8G("name",o.showNewPassword?"eye-off":"eye"),n.R7$(),n.Y8G("ngIf",(null==(l=o.passwordForm.get("newPassword"))?null:l.touched)&&(null==(l=o.passwordForm.get("newPassword"))||null==l.errors?null:l.errors.required)),n.R7$(),n.Y8G("ngIf",null==(c=o.passwordForm.get("newPassword"))?null:c.touched),n.R7$(2),n.Y8G("disabled",!o.passwordForm.valid||o.isLoading||o.oldPasswordSameAsNew()),n.R7$(),n.SpI(" ",o.isLoading?"MENGUBAH...":"UBAH PASSWORD"," ")}},dependencies:[m.bT,i.qT,i.BC,i.cb,i.YS,i.xh,i.j4,i.JD,g.Jm,g.W9,g.iq,g.$w,g.uz,g.he,g.JI,g.Gw],styles:['[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--font-family: "Arial", sans-serif;--background-color: #324851;--margin: 0;--padding: 0;--background: url(/assets/background.png);--background-size: cover}[_nghost-%COMP%]   .password-toggle[_ngcontent-%COMP%]{font-size:22px;margin-right:-2px;margin-top:18px;cursor:pointer}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{max-width:460px;margin:100px auto;background-color:#2a393e;padding:20px;border-radius:8px;box-shadow:0 0 10px #f8f4f41a}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#89da59}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#fff;margin:0}[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}[_nghost-%COMP%]   .password-requirements[_ngcontent-%COMP%]{margin:15px 0;padding:10px;border-radius:5px;background:#f8f9fa}[_nghost-%COMP%]   .password-requirements[_ngcontent-%COMP%]   .requirement-header[_ngcontent-%COMP%]{margin-bottom:10px;color:#666;font-size:.9em}[_nghost-%COMP%]   .password-requirements[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]{display:flex;align-items:center;margin:5px 0;color:#dc3545;font-size:.85em}[_nghost-%COMP%]   .password-requirements[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:1.2em}[_nghost-%COMP%]   .password-requirements[_ngcontent-%COMP%]   .requirement.met[_ngcontent-%COMP%]{color:#28a745}[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%]{width:calc(100% + -0px);padding:10px;font-size:15px;color:#fff}[_nghost-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-left:5px;font-size:13px}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:15px;color:#fff;border-radius:4px;margin-top:-5px;cursor:pointer}@media screen and (min-width: 320px) and (max-width: 375px){[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{min-height:480px;max-height:885px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{margin:60px auto;max-width:300px;padding:15px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   .password-toggle[_ngcontent-%COMP%]{font-size:18px;margin-top:22px}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px;font-size:13px}[_nghost-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:11px}[_nghost-%COMP%]   .password-requirements-list[_ngcontent-%COMP%]{padding:6px 8px}[_nghost-%COMP%]   .password-requirements-list[_ngcontent-%COMP%]   .requirement-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:11px}}@media screen and (min-width: 376px) and (max-width: 475px){[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{margin:100px auto;max-width:350px;padding:20px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}[_nghost-%COMP%]   .password-toggle[_ngcontent-%COMP%]{font-size:20px;margin-top:24px}}@media screen and (min-width: 476px) and (max-width: 768px){[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{max-width:500px;margin:170px auto;padding:25px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px}[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}[_nghost-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px;font-size:16px}}@media screen and (min-width: 769px) and (max-width: 999px){[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{max-width:550px;margin:200px auto;padding:30px}[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:25px}}']}),a})()}];let I=(()=>{var s;class a{}return(s=a).\u0275fac=function(t){return new(t||s)},s.\u0275mod=n.$C({type:s}),s.\u0275inj=n.G2t({imports:[h.iI.forChild($),h.iI]}),a})(),R=(()=>{var s;class a{}return(s=a).\u0275fac=function(t){return new(t||s)},s.\u0275mod=n.$C({type:s}),s.\u0275inj=n.G2t({imports:[m.MD,i.YN,i.X1,g.bv,I]}),a})()}}]);